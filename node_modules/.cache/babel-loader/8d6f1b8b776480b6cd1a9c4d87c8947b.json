{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\karthik\\\\Desktop\\\\Equipment_Rental\\\\frontend\\\\src\\\\components\\\\profile.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport NavBar from \"./navbar\";\nimport { Appcontext } from \"./context\";\nimport { Link } from \"react-router-dom\";\nimport axios from \"axios\";\nimport \"../css/profile.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction Profile() {\n  _s();\n\n  const {\n    data,\n    setData\n  } = React.useContext(Appcontext);\n  const storeData = window.localStorage.getItem(\"infos\");\n  const answer = JSON.parse(storeData); // call to get the bike info\n\n  async function getData() {\n    try {\n      const response = await axios.get(\"https://bike-rental-portal.herokuapp.com/bike\");\n      setData(response.data);\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  React.useEffect(() => {\n    getData(); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []); //getting the auth token from the local storage\n\n  const storeTk = window.localStorage.getItem(\"token\"); // creating an instance for the api call\n\n  const instance = axios.create({\n    baseURL: \"https://bike-rental-portal.herokuapp.com\",\n    headers: {\n      \"auth-token\": storeTk\n    }\n  }); // for deleting the booking\n\n  async function deleteBook(items, item) {\n    try {\n      const response = await instance.put(\"https://bike-rental-portal.herokuapp.com/deleteBooking\", {\n        _id: item._id,\n        bookId: items.bookId\n      });\n      let old = [...data];\n      let index = old.findIndex(item => item._id === response.data._id);\n      old[index] = response.data;\n      setData(old);\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  const getter = data;\n  const getter2 = getter.filter(item => item.booking.length !== 0);\n  const getter3 = getter2.map(item => {\n    // let count = 0;\n    let oo = [];\n    item.booking.forEach(value => {\n      if (value.userId === answer.id) {\n        return oo.push(value);\n      } else {\n        return;\n      }\n    });\n    return { ...item,\n      booking: oo\n    };\n  });\n  console.log(getter3);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(NavBar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container-fluid\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-lg-4 colsss1\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"leftDash\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"profImage\",\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                className: \"selfCam\",\n                src: \"./images/ride.jpg\",\n                alt: \"\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 87,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 89,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                padding: \"15px\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"UserName : \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 92,\n                  columnNumber: 19\n                }, this), answer.name]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 91,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Email : \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 96,\n                  columnNumber: 19\n                }, this), answer.email]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 95,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 90,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                textAlign: \"center\"\n              },\n              children: /*#__PURE__*/_jsxDEV(Link, {\n                to: \"/book\",\n                children: [\" \", /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  className: \"btn btn-danger\",\n                  children: \"Book Now\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 103,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 101,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-lg-8 colsss2\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"myBook\",\n              children: \"My Bookings\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n            style: {\n              marginTop: \"0px\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"tablecss\",\n            children: /*#__PURE__*/_jsxDEV(\"table\", {\n              className: \"table tablecss\",\n              children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                className: \"thead-dark\",\n                children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"BIKE NAME\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 120,\n                    columnNumber: 19\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"BOOK DETAILS\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 121,\n                    columnNumber: 19\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 119,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 118,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                children: getter3.map(item => {\n                  if (item.booking.length !== 0) {\n                    return /*#__PURE__*/_jsxDEV(_Fragment, {\n                      children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                        style: {\n                          textAlign: \"center\"\n                        },\n                        children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                          style: {\n                            fontWeight: \"bold\",\n                            paddingTop: \"25px\"\n                          },\n                          children: item.bikeName\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 133,\n                          columnNumber: 27\n                        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                          children: /*#__PURE__*/_jsxDEV(\"tbody\", {\n                            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                              children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n                                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                                  children: \"Start\"\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 144,\n                                  columnNumber: 35\n                                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                                  children: \"End\"\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 145,\n                                  columnNumber: 35\n                                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                                  children: \"Start-Time\"\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 146,\n                                  columnNumber: 35\n                                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                                  children: \"End-Time\"\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 147,\n                                  columnNumber: 35\n                                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                                  children: \"Pick-up Location\"\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 148,\n                                  columnNumber: 35\n                                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                                  children: \"Action\"\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 149,\n                                  columnNumber: 35\n                                }, this)]\n                              }, item._id, true, {\n                                fileName: _jsxFileName,\n                                lineNumber: 143,\n                                columnNumber: 35\n                              }, this), item.booking.map(items => {\n                                let stoday = new Date(items.startDate);\n                                let dd = String(stoday.getDate());\n                                let mm = String(stoday.getMonth() + 1); //January is 0!\n\n                                let yyyy = stoday.getFullYear();\n                                stoday = mm + '/' + dd + '/' + yyyy; // console.log(stoday)\n\n                                let etoday = new Date(items.endDate);\n                                let ddd = String(etoday.getDate()).padStart(2, '0');\n                                let mmm = String(etoday.getMonth() + 1).padStart(2, '0'); //January is 0!\n\n                                let yyyyy = etoday.getFullYear();\n                                etoday = mmm + '/' + ddd + '/' + yyyyy;\n                                return /*#__PURE__*/_jsxDEV(\"tr\", {\n                                  children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                                    children: stoday\n                                  }, void 0, false, {\n                                    fileName: _jsxFileName,\n                                    lineNumber: 167,\n                                    columnNumber: 39\n                                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                                    children: etoday\n                                  }, void 0, false, {\n                                    fileName: _jsxFileName,\n                                    lineNumber: 168,\n                                    columnNumber: 39\n                                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                                    children: items.startTime\n                                  }, void 0, false, {\n                                    fileName: _jsxFileName,\n                                    lineNumber: 169,\n                                    columnNumber: 39\n                                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                                    children: items.endTime\n                                  }, void 0, false, {\n                                    fileName: _jsxFileName,\n                                    lineNumber: 170,\n                                    columnNumber: 39\n                                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                                    children: items.pickUp\n                                  }, void 0, false, {\n                                    fileName: _jsxFileName,\n                                    lineNumber: 171,\n                                    columnNumber: 39\n                                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                                    children: /*#__PURE__*/_jsxDEV(\"button\", {\n                                      className: \"btn btn-info\",\n                                      onClick: () => {\n                                        deleteBook(items, item);\n                                      },\n                                      children: \"Cancel\"\n                                    }, void 0, false, {\n                                      fileName: _jsxFileName,\n                                      lineNumber: 174,\n                                      columnNumber: 41\n                                    }, this)\n                                  }, void 0, false, {\n                                    fileName: _jsxFileName,\n                                    lineNumber: 173,\n                                    columnNumber: 39\n                                  }, this)]\n                                }, items.bookId, true, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 166,\n                                  columnNumber: 37\n                                }, this);\n                              })]\n                            }, void 0, true, {\n                              fileName: _jsxFileName,\n                              lineNumber: 141,\n                              columnNumber: 31\n                            }, this)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 140,\n                            columnNumber: 29\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 139,\n                          columnNumber: 27\n                        }, this)]\n                      }, item._id, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 132,\n                        columnNumber: 25\n                      }, this)\n                    }, void 0, false);\n                  } else {\n                    return /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false);\n                  }\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 124,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 117,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"footer\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(Profile, \"DYzxoL0hSTraWfWt2cMnA2wFbec=\");\n\n_c = Profile;\nexport default Profile;\n\nvar _c;\n\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"sources":["C:/Users/karthik/Desktop/Equipment_Rental/frontend/src/components/profile.js"],"names":["React","NavBar","Appcontext","Link","axios","Profile","data","setData","useContext","storeData","window","localStorage","getItem","answer","JSON","parse","getData","response","get","error","console","log","useEffect","storeTk","instance","create","baseURL","headers","deleteBook","items","item","put","_id","bookId","old","index","findIndex","getter","getter2","filter","booking","length","getter3","map","oo","forEach","value","userId","id","push","padding","name","email","textAlign","marginTop","fontWeight","paddingTop","bikeName","stoday","Date","startDate","dd","String","getDate","mm","getMonth","yyyy","getFullYear","etoday","endDate","ddd","padStart","mmm","yyyyy","startTime","endTime","pickUp"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,SAAQC,UAAR,QAAyB,WAAzB;AACA,SAAQC,IAAR,QAAmB,kBAAnB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAO,oBAAP;;;;AAGA,SAASC,OAAT,GAAmB;AAAA;;AACjB,QAAM;AAAEC,IAAAA,IAAF;AAAQC,IAAAA;AAAR,MAAoBP,KAAK,CAACQ,UAAN,CAAiBN,UAAjB,CAA1B;AACA,QAAMO,SAAS,GAAGC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,OAA5B,CAAlB;AACA,QAAMC,MAAM,GAAGC,IAAI,CAACC,KAAL,CAAWN,SAAX,CAAf,CAHiB,CAKjB;;AACA,iBAAeO,OAAf,GAAyB;AACvB,QAAI;AACF,YAAMC,QAAQ,GAAG,MAAMb,KAAK,CAACc,GAAN,CAAU,+CAAV,CAAvB;AACAX,MAAAA,OAAO,CAACU,QAAQ,CAACX,IAAV,CAAP;AACD,KAHD,CAGE,OAAOa,KAAP,EAAc;AACdC,MAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACD;AACF;;AAEDnB,EAAAA,KAAK,CAACsB,SAAN,CAAgB,MAAM;AACpBN,IAAAA,OAAO,GADa,CAEpB;AACD,GAHD,EAGG,EAHH,EAfiB,CAoBjB;;AACA,QAAMO,OAAO,GAAGb,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,OAA5B,CAAhB,CArBiB,CAuBjB;;AACA,QAAMY,QAAQ,GAAGpB,KAAK,CAACqB,MAAN,CAAa;AAC5BC,IAAAA,OAAO,EAAE,0CADmB;AAE5BC,IAAAA,OAAO,EAAE;AACP,oBAAcJ;AADP;AAFmB,GAAb,CAAjB,CAxBiB,CAgCjB;;AACA,iBAAeK,UAAf,CAA0BC,KAA1B,EAAiCC,IAAjC,EAAuC;AACrC,QAAI;AACF,YAAMb,QAAQ,GAAG,MAAMO,QAAQ,CAACO,GAAT,CACrB,wDADqB,EAErB;AACEC,QAAAA,GAAG,EAAEF,IAAI,CAACE,GADZ;AAEEC,QAAAA,MAAM,EAAEJ,KAAK,CAACI;AAFhB,OAFqB,CAAvB;AAQA,UAAIC,GAAG,GAAG,CAAC,GAAG5B,IAAJ,CAAV;AACA,UAAI6B,KAAK,GAAGD,GAAG,CAACE,SAAJ,CAAeN,IAAD,IAAUA,IAAI,CAACE,GAAL,KAAaf,QAAQ,CAACX,IAAT,CAAc0B,GAAnD,CAAZ;AACAE,MAAAA,GAAG,CAACC,KAAD,CAAH,GAAalB,QAAQ,CAACX,IAAtB;AACAC,MAAAA,OAAO,CAAC2B,GAAD,CAAP;AACD,KAbD,CAaE,OAAOf,KAAP,EAAc;AACdC,MAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACD;AACF;;AAED,QAAMkB,MAAM,GAAG/B,IAAf;AACA,QAAMgC,OAAO,GAAGD,MAAM,CAACE,MAAP,CAAeT,IAAD,IAAUA,IAAI,CAACU,OAAL,CAAaC,MAAb,KAAwB,CAAhD,CAAhB;AACA,QAAMC,OAAO,GAAGJ,OAAO,CAACK,GAAR,CAAab,IAAD,IAAU;AACpC;AACA,QAAIc,EAAE,GAAG,EAAT;AACAd,IAAAA,IAAI,CAACU,OAAL,CAAaK,OAAb,CAAsBC,KAAD,IAAW;AAC9B,UAAIA,KAAK,CAACC,MAAN,KAAiBlC,MAAM,CAACmC,EAA5B,EAAgC;AAC9B,eAAOJ,EAAE,CAACK,IAAH,CAAQH,KAAR,CAAP;AACD,OAFD,MAEO;AACL;AACD;AACF,KAND;AAQA,WAAO,EAAE,GAAGhB,IAAL;AAAWU,MAAAA,OAAO,EAAEI;AAApB,KAAP;AACD,GAZe,CAAhB;AAcAxB,EAAAA,OAAO,CAACC,GAAR,CAAYqB,OAAZ;AAEA,sBACE;AAAA,4BACE,QAAC,MAAD;AAAA;AAAA;AAAA;AAAA,YADF,eAEE;AAAK,MAAA,SAAS,EAAC,iBAAf;AAAA,6BACE;AAAK,QAAA,SAAS,EAAC,KAAf;AAAA,gCACE;AAAK,UAAA,SAAS,EAAC,kBAAf;AAAA,iCACE;AAAK,YAAA,SAAS,EAAC,UAAf;AAAA,oCACE;AAAK,cAAA,SAAS,EAAC,WAAf;AAAA,qCACE;AAAK,gBAAA,SAAS,EAAC,SAAf;AAAyB,gBAAA,GAAG,EAAC,mBAA7B;AAAiD,gBAAA,GAAG,EAAC;AAArD;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,oBADF,eAIE;AAAA;AAAA;AAAA;AAAA,oBAJF,eAKE;AAAK,cAAA,KAAK,EAAE;AAAEQ,gBAAAA,OAAO,EAAE;AAAX,eAAZ;AAAA,sCACE;AAAA,wCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,EAEGrC,MAAM,CAACsC,IAFV;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,eAKE;AAAA,wCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,EAEGtC,MAAM,CAACuC,KAFV;AAAA;AAAA;AAAA;AAAA;AAAA,sBALF;AAAA;AAAA;AAAA;AAAA;AAAA,oBALF,eAeE;AAAK,cAAA,KAAK,EAAE;AAAEC,gBAAAA,SAAS,EAAE;AAAb,eAAZ;AAAA,qCACE,QAAC,IAAD;AAAM,gBAAA,EAAE,EAAC,OAAT;AAAA,2BACG,GADH,eAEE;AAAQ,kBAAA,IAAI,EAAC,QAAb;AAAsB,kBAAA,SAAS,EAAC,gBAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAFF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,oBAfF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBADF,eA2BE;AAAK,UAAA,SAAS,EAAC,kBAAf;AAAA,kCACE;AAAA,mCACE;AAAG,cAAA,SAAS,EAAC,QAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kBADF,eAKE;AAAI,YAAA,KAAK,EAAE;AAAEC,cAAAA,SAAS,EAAE;AAAb;AAAX;AAAA;AAAA;AAAA;AAAA,kBALF,eAME;AAAK,YAAA,SAAS,EAAC,UAAf;AAAA,mCACE;AAAO,cAAA,SAAS,EAAC,gBAAjB;AAAA,sCACE;AAAO,gBAAA,SAAS,EAAC,YAAjB;AAAA,uCACE;AAAA,0CACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BADA,eAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,sBADF,eAOE;AAAA,0BAEEZ,OAAO,CAACC,GAAR,CAAab,IAAD,IAAU;AACpB,sBAAGA,IAAI,CAACU,OAAL,CAAaC,MAAb,KAAuB,CAA1B,EAA4B;AAG5B,wCACE;AAAA,6CACE;AAAI,wBAAA,KAAK,EAAE;AAAEY,0BAAAA,SAAS,EAAE;AAAb,yBAAX;AAAA,gDACE;AACE,0BAAA,KAAK,EAAE;AAAEE,4BAAAA,UAAU,EAAE,MAAd;AAAsBC,4BAAAA,UAAU,EAAE;AAAlC,2BADT;AAAA,oCAGG1B,IAAI,CAAC2B;AAHR;AAAA;AAAA;AAAA;AAAA,gCADF,eAOE;AAAA,iDACE;AAAA,mDACE;AAAA,sDAEI;AAAA,wDACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wCADA,eAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wCAFA,eAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wCAHA,eAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wCAJA,eAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wCALA,eAMA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wCANA;AAAA,iCAAS3B,IAAI,CAACE,GAAd;AAAA;AAAA;AAAA;AAAA,sCAFJ,EAWGF,IAAI,CAACU,OAAL,CAAaG,GAAb,CAAkBd,KAAD,IAAW;AAC3B,oCAAI6B,MAAM,GAAG,IAAIC,IAAJ,CAAS9B,KAAK,CAAC+B,SAAf,CAAb;AACA,oCAAIC,EAAE,GAAGC,MAAM,CAACJ,MAAM,CAACK,OAAP,EAAD,CAAf;AACA,oCAAIC,EAAE,GAAGF,MAAM,CAACJ,MAAM,CAACO,QAAP,KAAoB,CAArB,CAAf,CAH2B,CAGa;;AACxC,oCAAIC,IAAI,GAAGR,MAAM,CAACS,WAAP,EAAX;AACAT,gCAAAA,MAAM,GAAGM,EAAE,GAAG,GAAL,GAAWH,EAAX,GAAgB,GAAhB,GAAsBK,IAA/B,CAL2B,CAM3B;;AAEA,oCAAIE,MAAM,GAAG,IAAIT,IAAJ,CAAS9B,KAAK,CAACwC,OAAf,CAAb;AACA,oCAAIC,GAAG,GAAGR,MAAM,CAACM,MAAM,CAACL,OAAP,EAAD,CAAN,CAAyBQ,QAAzB,CAAkC,CAAlC,EAAqC,GAArC,CAAV;AACA,oCAAIC,GAAG,GAAGV,MAAM,CAACM,MAAM,CAACH,QAAP,KAAoB,CAArB,CAAN,CAA8BM,QAA9B,CAAuC,CAAvC,EAA0C,GAA1C,CAAV,CAV2B,CAU+B;;AAC1D,oCAAIE,KAAK,GAAGL,MAAM,CAACD,WAAP,EAAZ;AACAC,gCAAAA,MAAM,GAAGI,GAAG,GAAG,GAAN,GAAYF,GAAZ,GAAkB,GAAlB,GAAwBG,KAAjC;AACA,oDACE;AAAA,0DACE;AAAA,8CAAKf;AAAL;AAAA;AAAA;AAAA;AAAA,0CADF,eAEE;AAAA,8CAAKU;AAAL;AAAA;AAAA;AAAA;AAAA,0CAFF,eAGE;AAAA,8CAAKvC,KAAK,CAAC6C;AAAX;AAAA;AAAA;AAAA;AAAA,0CAHF,eAIE;AAAA,8CAAK7C,KAAK,CAAC8C;AAAX;AAAA;AAAA;AAAA;AAAA,0CAJF,eAKE;AAAA,8CAAK9C,KAAK,CAAC+C;AAAX;AAAA;AAAA;AAAA;AAAA,0CALF,eAOE;AAAA,2DACE;AACE,sCAAA,SAAS,EAAC,cADZ;AAEE,sCAAA,OAAO,EAAE,MAAM;AACbhD,wCAAAA,UAAU,CAACC,KAAD,EAAQC,IAAR,CAAV;AACD,uCAJH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,0CAPF;AAAA,mCAASD,KAAK,CAACI,MAAf;AAAA;AAAA;AAAA;AAAA,wCADF;AAoBD,+BAjCA,CAXH;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gCAPF;AAAA,yBAAyCH,IAAI,CAACE,GAA9C;AAAA;AAAA;AAAA;AAAA;AADF,qCADF;AA6DI,mBAhEJ,MAgEQ;AACN,wCACE,qCADF;AAID;AACF,iBAvED;AAFF;AAAA;AAAA;AAAA;AAAA,sBAPF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kBANF;AAAA;AAAA;AAAA;AAAA;AAAA,gBA3BF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YAFF,eA4HE;AAAK,MAAA,SAAS,EAAC;AAAf;AAAA;AAAA;AAAA;AAAA,YA5HF;AAAA,kBADF;AAgID;;GAtMQ3B,O;;KAAAA,O;AAwMT,eAAeA,OAAf","sourcesContent":["import React from \"react\";\r\nimport NavBar from \"./navbar\";\r\nimport {Appcontext} from \"./context\";\r\nimport {Link} from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport \"../css/profile.css\"\r\n\r\n\r\nfunction Profile() {\r\n  const { data, setData } = React.useContext(Appcontext);\r\n  const storeData = window.localStorage.getItem(\"infos\");\r\n  const answer = JSON.parse(storeData);\r\n\r\n  // call to get the bike info\r\n  async function getData() {\r\n    try {\r\n      const response = await axios.get(\"https://bike-rental-portal.herokuapp.com/bike\");\r\n      setData(response.data);\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    getData();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  //getting the auth token from the local storage\r\n  const storeTk = window.localStorage.getItem(\"token\");\r\n\r\n  // creating an instance for the api call\r\n  const instance = axios.create({\r\n    baseURL: \"https://bike-rental-portal.herokuapp.com\",\r\n    headers: {\r\n      \"auth-token\": storeTk,\r\n    },\r\n  });\r\n\r\n\r\n  // for deleting the booking\r\n  async function deleteBook(items, item) {\r\n    try {\r\n      const response = await instance.put(\r\n        \"https://bike-rental-portal.herokuapp.com/deleteBooking\",\r\n        {\r\n          _id: item._id,\r\n          bookId: items.bookId,\r\n        }\r\n      );\r\n     \r\n      let old = [...data];\r\n      let index = old.findIndex((item) => item._id === response.data._id);\r\n      old[index] = response.data;\r\n      setData(old);\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n\r\n  const getter = data;\r\n  const getter2 = getter.filter((item) => item.booking.length !== 0);\r\n  const getter3 = getter2.map((item) => {\r\n    // let count = 0;\r\n    let oo = []\r\n    item.booking.forEach((value) => {\r\n      if (value.userId === answer.id) {\r\n        return(oo.push(value));\r\n      } else {\r\n        return;\r\n      }\r\n    });\r\n    \r\n    return { ...item, booking: oo };\r\n  });\r\n\r\n  console.log(getter3)\r\n\r\n  return (\r\n    <>\r\n      <NavBar />\r\n      <div className=\"container-fluid\">\r\n        <div className=\"row\">\r\n          <div className=\"col-lg-4 colsss1\">\r\n            <div className=\"leftDash\">\r\n              <div className=\"profImage\">\r\n                <img className=\"selfCam\" src=\"./images/ride.jpg\" alt=\"\" />\r\n              </div>\r\n              <hr />\r\n              <div style={{ padding: \"15px\" }}>\r\n                <p>\r\n                  <span>UserName : </span>\r\n                  {answer.name}\r\n                </p>\r\n                <p>\r\n                  <span>Email : </span>\r\n                  {answer.email}\r\n                </p>\r\n              </div>\r\n              <div style={{ textAlign: \"center\" }}>\r\n                <Link to=\"/book\">\r\n                  {\" \"}\r\n                  <button type=\"button\" className=\"btn btn-danger\">\r\n                    Book Now\r\n                  </button>\r\n                </Link>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"col-lg-8 colsss2\">\r\n            <div>\r\n              <p className=\"myBook\">My Bookings</p>\r\n            </div>\r\n\r\n            <hr style={{ marginTop: \"0px\" }} />\r\n            <div className=\"tablecss\">\r\n              <table className=\"table tablecss\">\r\n                <thead className=\"thead-dark\">\r\n                  <tr>\r\n                  <th>BIKE NAME</th>\r\n                  <th>BOOK DETAILS</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {\r\n                  getter3.map((item) => {\r\n                    if(item.booking.length !==0){\r\n\r\n                   \r\n                    return (\r\n                      <>\r\n                        <tr style={{ textAlign: \"center\" }} key={item._id}>\r\n                          <td\r\n                            style={{ fontWeight: \"bold\", paddingTop: \"25px\" }}\r\n                          >\r\n                            {item.bikeName}\r\n                          </td>\r\n\r\n                          <td>\r\n                            <tbody>\r\n                              <tr>\r\n                                {/* <thead> */}\r\n                                  <tr key={item._id}>\r\n                                  <th>Start</th>\r\n                                  <th>End</th>\r\n                                  <th>Start-Time</th>\r\n                                  <th>End-Time</th>\r\n                                  <th>Pick-up Location</th>\r\n                                  <th>Action</th>\r\n                                </tr>\r\n                                {/* </thead> */}\r\n                                {item.booking.map((items) => {\r\n                                  let stoday = new Date(items.startDate);\r\n                                  let dd = String(stoday.getDate());\r\n                                  let mm = String(stoday.getMonth() + 1); //January is 0!\r\n                                  let yyyy = stoday.getFullYear();\r\n                                  stoday = mm + '/' + dd + '/' + yyyy;\r\n                                  // console.log(stoday)\r\n\r\n                                  let etoday = new Date(items.endDate);\r\n                                  let ddd = String(etoday.getDate()).padStart(2, '0');\r\n                                  let mmm = String(etoday.getMonth() + 1).padStart(2, '0'); //January is 0!\r\n                                  let yyyyy = etoday.getFullYear();\r\n                                  etoday = mmm + '/' + ddd + '/' + yyyyy;\r\n                                  return (\r\n                                    <tr key={items.bookId}>\r\n                                      <td>{stoday}</td>\r\n                                      <td>{etoday}</td>\r\n                                      <td>{items.startTime}</td>\r\n                                      <td>{items.endTime}</td>\r\n                                      <td>{items.pickUp}</td>\r\n                                      \r\n                                      <td>\r\n                                        <button\r\n                                          className=\"btn btn-info\"\r\n                                          onClick={() => {\r\n                                            deleteBook(items, item);\r\n                                          }}\r\n                                        >\r\n                                          Cancel\r\n                                        </button>\r\n                                      </td>\r\n                                    </tr>\r\n                                  );\r\n                                })}\r\n                              </tr>\r\n                            </tbody>\r\n                          </td>\r\n                        </tr>\r\n                      </>\r\n                    ); }else{\r\n                      return(\r\n                        <>\r\n                        </>\r\n                      )\r\n                    }\r\n                  })}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className=\"footer\"></div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Profile;"]},"metadata":{},"sourceType":"module"}